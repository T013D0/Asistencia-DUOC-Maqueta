<ion-content class="ion-padding">
  <div class="page-container">
    <ng-container *ngIf="isOnline; else offline">
      <h1 class="page-title">Escanea para tu asistencia</h1>
      <p class="page-subtitle">Escanea el QR aquí</p>

      <div class="qr-container">
        <ng-container *ngIf="!qrText; else qrCode">
          <div class="skeleton-qr"></div>
        </ng-container>
        <ng-template #qrCode>
          <qr-code
            [value]="qrText"
            size="300"
            errorCorrectionLevel="M"
          ></qr-code>
        </ng-template>
      </div>

      <div class="button-container">
        <ion-button
          expand="block"
          routerLink="/assistancegeneratespec"
          class="back-button"
        >
          Volver al menú
        </ion-button>
      </div>
    </ng-container>

    <ng-template #offline>
      <div class="offline-container">
        <ion-icon name="cloud-offline-outline" class="offline-icon"></ion-icon>
        <h2>No hay conexión a Internet</h2>
        <p>Por favor, verifica tu conexión a Internet e intenta nuevamente.</p>
        <ion-button
          expand="block"
          (click)="updateOnlineStatus()"
          class="retry-button"
        >
          Reintentar
        </ion-button>
      </div>
    </ng-template>
  </div>
</ion-content>
